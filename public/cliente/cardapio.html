<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <title>Cardápio – Pitombo Lanches</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <style>
    body { font-family: Arial; max-width: 900px; margin: 16px auto; }
    .grid { display: grid; grid-template-columns: repeat(auto-fill,minmax(220px,1fr)); gap: 16px; }
    .card { border:1px solid #ddd; border-radius:8px; padding:12px; }
    .card img { width:100%; height:140px; object-fit:cover; border-radius:6px; }
    .price { font-weight: bold; margin-top:6px; }
  </style>
</head>
<body>
  <h1>Cardápio</h1>
  <div id="lista" class="grid">Carregando...</div>

<script>
(async () => {
  try {
    const r = await fetch('/api/menu', { cache: 'no-store' });
    const itens = await r.json();
    const div = document.getElementById('lista');
    div.innerHTML = '';
    itens.forEach(it => {
      const reais = (Number(it.price_cents)/100).toFixed(2).replace('.', ',');
      const el = document.createElement('div');
      el.className = 'card';
      el.innerHTML = `
        <img src="${it.image_url}" alt="${it.name}">
        <div class="name">${it.name}</div>
        <div class="price">R$ ${reais}</div>
      `;
      div.appendChild(el);
    });
    if (!itens.length) div.textContent = 'Sem itens ativos por enquanto.';
  } catch (e) {
    document.getElementById('lista').textContent = 'Erro ao carregar cardápio.';
  }
})();
</script>
</body>
</html>

